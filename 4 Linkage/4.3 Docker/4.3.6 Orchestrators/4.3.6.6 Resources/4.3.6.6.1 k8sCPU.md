# k8s CPU

Чтобы [Kubernetes](../4.3.6.2%20Kubernetes(k8s).md) смог максимально эффективно использовать доступную инфраструктуру и корректно выделить ресурсы, необходимые для работы вашего приложения, вам следует указать требования в ресурсам каждого контейнера. В данный момент есть возможность задавать два типа требований (requests и limits) для двух типов ресурсов - памяти ([memory](/3%20Memory%20and%20Concurrency/3.1%20Memory/3.1.1%20AboutMemory/)) и процессора ([CPU](/2%20ComputerScience/2.0%20Linux/2.0.2%20Processor(CPU).md)).

При описании пода (Pods) для каждого из его контейнеров могут быть заданы требования к ресурсам в следующем формате:
```yaml
...
resources:
  limits:
    cpu: "2"
    memory: 2Gi
  requests:
    cpu: "2"
    memory: 2Gi
...
```

### Requests

Requests используется в [Kubernetes](../4.3.6.2%20Kubernetes(k8s).md) планировщиком для корректного размещения и запуска подов в существующей инфраструктуре, как бы говоря “запусти контейнеры данного пода там, где есть достаточное количество запрощенных ресурсов”.

Если значение requests для контейнера не указано => по умолчанию будет используется значение из limits. Если же не указано значение и limits, то по умолчанию это значение будет равно 0 (ограничивается ресурсами узла (ноды), на котором запускается под).

### Limits

Limits - жесткое ограничение ресурсов, доступных контейнеру и среде его выполнения (тут и далее имеется в виду Docker container runtime). Превышение указанных лимитов (limits) ресурсов зачастую приводит к троттлингу или остановке (termination) контейнера.

### Стоит ли указывать значения limits больше, чем requests?

Если ваше приложение стабильно использует предсказуемый объем оперативной памяти, то устанавливать разные значения параметров requests и limits для памяти нет смысла. В случае с CPU, разница между заданными значениями requests и limits может не устанавливаться (при условии, что эти же ресурсы не используются другими контейнерами и их не нужно “делить”).


------

[4.3.6.5 Practise Theme](../4.3.6.5%20Practise.md) | [Back To iOSWiki Contents](https://github.com/eldaroid/iOSWiki) | [4.3.6.6.2 k8s Memory Theme](./4.3.6.6.2%20k8sMemory.md)
