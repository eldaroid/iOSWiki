# Проблемы многопоточности

1. :heavy_check_mark: [Многопоточность (concurrency) в Swift 3. GCD и Dispatch Queues](https://habr.com/ru/post/320152/#:~:text=race%20condition)

Как только мы позволяем задачам (tasks) работать параллельно, появляются проблемы, связанные с тем, что разные задачи захотят получить доступ к одним и тем же ресурсам.
Основных проблемы три:

* ***cостояние гонки (`race condition`)*** — ошибка проектирования многопоточной системы или приложения, при которой работа системы или приложения зависит от того, в каком порядке выполняются части кода;

* ***инверсия приоритетов (`priority inversion`)*** - логическое несоответствие с правилами планирования — задача с более высоким приоритетом находится в ожидании в то время как низкоприоритетная задача выполняется;

* ***взаимная блокировка (`deadlock`)*** — ситуация в многопоточной системе, при которой несколько потоков находятся в состоянии бесконечного ожидания ресурсов, занятых самими этими потоками;
  
То есть следующий код вызовет `deadlock`:
```
let queue = DispatchQueue(label: "com.tursunov.app.exampleQueue")
queue.async {
    // ...
    queue.sync { // deadlock
        // ...
    }
}
```
> НИКОГДА НЕ вызывайте метод sync на main queue, потому что это приведет к взаимной блокировке (deadlock) вашего приложения!
