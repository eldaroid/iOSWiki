# Process

## Предисловие

В мире [операционных систем](/2%20ComputerScience/2.0%20Linux/2.0.1%20Linux.md)  существуют две сущности, где запускаются наши программы (некие капсулы запуска программ) - **[процессы](./2.0.3%20Process.md) (изолированы друг от друга)**, **потоки (thread) (обмениваются данными почти бесплатно)**. 

Каждое приложение состоит как минимум из 1 [процесса](/2%20ComputerScience/2.0%20Linux/2.0.4%20ConcurrencyAndMultitasking/2.0.4.1%20Process.md) - чаще всего только один.
 А процесс состоит хотя бы из 1 потока (main). 

![](https://www.w3.org/People/Frystyk/thesis/MultiStackThread.gif)

> Служба (service) - запущенный процесс

**Multitasking(многозадачность)** более общее понятие, позволяет нескольким приложениям или [процессам](/2%20ComputerScience/2.0%20Linux/2.0.4%20ConcurrencyAndMultitasking/2.0.4.1%20Process.md) выполняться одновременно на уровне [операционной системы](/2%20ComputerScience/2.0%20Linux/).

Например, вы можете одновременно слушать музыку, работать с текстовым редактором и просматривать веб-страницы. [Операционная система](/2%20ComputerScience/2.0%20Linux/) управляет переключением между этими [процессами](/2%20ComputerScience/2.0%20Linux/2.0.4%20ConcurrencyAndMultitasking/2.0.4.1%20Process.md), обеспечивая их одновременное выполнение.

**Concurrency(параллелизм)** - способность программы управлять выполнением нескольких задач одновременно.

**Multithreading(многопоточность или способ достижения concurrency)** позволяет программе выполнять несколько потоков выполнения внутри одного процесса. В Swift часто реализуется с использованием [GCD](/3%20Memory%20and%20Concurrency/3.2%20Multithreading/3.2.3%20GCD.md), который предоставляет высокоуровневый [API](/2%20ComputerScience/2.3%20Networking/2.3.1%20API/2.3.1.1%20API.md) для управления потоками и задачами.

## Процесс

Процесс — это исполняемый **экземпляр приложения (path of execution. Н/р: main())**, создается автоматически вызывая метод fork(). Важно отметить, что поток может делать все то же, что и процесс. Но поскольку процесс может состоять из нескольких потоков, поток можно считать «облегченным» процессом.

## Загрузка (boot)

Boot - процесс запуска устройств и процесс запуска операционной системы компьютера после включения или перезагрузки. В этот момент происходит инициализация и самонастройка основных компонентов системы.

![](https://github.com/eldaroid/pictures/blob/master/iOSWiki/ComputerScience/LinuxBootProcess.jpeg?raw=true)

## Основные ресурсы процесса

* [Память](/3%20Memory%20and%20Concurrency/3.1%20Memory/3.1.2%20RandomAccessMemory/3.1.2.1%20RAM.md)
* Процессорное время
* Оборудование Н/р: устройство ввода и вывода (I/O) - ([tty](https://www.linusakesson.net/programming/tty/))

## Состояния процесса

![LinuxProcessState](https://github.com/eldaroid/pictures/blob/master/iOSWiki/ComputerScience/LinuxProcessState.jpeg?raw=true)

### Список сигналов

Сигналы в UNIX-подобных операционных системах указывают ядру, что произошли незаконные ошибки доступа к памяти, прервать нормальное планирование процесса и завершить/остановить его, или, вместо продолжения выполнения процесса с места остановки, выполнить функцию - обработчик этих сигналов, и лишь затем продолжить выполнение основного кода.

Сигналы, предназначенные процессу, создаются (отправляются) в нескольких ситуациях: при аппаратных сбоях, при срабатывании особого таймера, при обработке спецсимволов ([Ctrl+C, Ctrl+Z](/1%20Common/1.3%20Terminal/1.3.1%20Teminal.md)) драйвером управляющего терминала, с помощью системного вызова `kill()`. 

В зависимости от причины, отправляются сигналы разных типов. Тип сигнала обозначается целым числом (номером). В Linux сигналы нумеруются от 1 до 64:

```bash
$ kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL
 5) SIGTRAP      6) SIGABRT      7) SIGBUS       8) SIGFPE
 9) SIGKILL     10) SIGUSR1     11) SIGSEGV     12) SIGUSR2
13) SIGPIPE     14) SIGALRM     15) SIGTERM     16) SIGSTKFLT
17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU
25) SIGXFSZ     26) SIGVTALRM   27) SIGPROF     28) SIGWINCH
29) SIGIO       30) SIGPWR      31) SIGSYS      34) SIGRTMIN
35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3  38) SIGRTMIN+4
39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12
47) SIGRTMIN+13 48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14
51) SIGRTMAX-13 52) SIGRTMAX-12 53) SIGRTMAX-11 54) SIGRTMAX-10
55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7  58) SIGRTMAX-6
59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
63) SIGRTMAX-1  64) SIGRTMAX
```

Наиболее популярные сигналы в UNIX-подобных операционных системах:

| Сигнал  | Номер | Сочетание клавиш | Описание                                                        |
|---------|-------|-------------------|-----------------------------------------------------------------|
| SIGHUP  | 1     |                   | Завершение управляющего терминала или сессии                    |
| SIGINT  | 2     | Ctrl+C            | Прерывание, обычно инициируется пользователем                   |
| SIGQUIT | 3     | Ctrl+\            | Прерывание и генерация дампа памяти                             |
| SIGKILL | 9     |                   | Немедленное завершение процесса (нельзя перехватить или игнорировать) |
| SIGTERM | 15    |                   | Запрос на завершение процесса                                   |
| SIGSTOP | 19    |                   | Остановка выполнения процесса (нельзя перехватить или игнорировать) |
| SIGCONT | 18    |                   | Возобновление выполнения приостановленного процесса             |
| SIGTSTP | 20    | Ctrl+Z            | Остановка процесса пользователем                                |
| SIGCHLD | 17    |                   | Индикация завершения или изменения состояния дочернего процесса |
| SIGALRM | 14    |                   | Таймер (сигнал посылается по истечении времени, установленного функцией alarm) |
| SIGUSR1 | 10    |                   | Пользовательский сигнал для использования в пользовательских программах |
| SIGUSR2 | 12    |                   | Второй пользовательский сигнал для использования в пользовательских программах |

## Просмотр процессов

Утилита\команда `ps` позволяет просмотреть полезные данные про процессы.

`ps aux | grep bash`

* `ps a` все процессы в системе
* `ps u` детализированный вывод
* `ps x` процессы, запущенные текущим пользователем

> ❗Параметры в `ps <parametr>` можно передавать в различных стилях, в зависимости от этого у него будет различное поведение. Это необходимо для обратной совместимости

---

[2.0.3 File System in Linux Theme](../2.0.3%20FileSystemLinux.md) | [Back To iOSWiki Contents](https://github.com/eldaroid/iOSWiki) |  [2.0.4.2 Thread Theme Folder](./2.0.4.2%20Thread.md)


