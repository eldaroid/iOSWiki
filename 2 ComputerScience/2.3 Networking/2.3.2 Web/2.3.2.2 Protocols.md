 ## Web Protocols

1. [Web протоколы передачи данных](https://github.com/sashakid/ios-guide/blob/master/Main/11_networking.md#протоколы-передачи-данных)

## Протоколы передачи данных

Протокол передачи данных — набор соглашений интерфейса логического уровня, которые определяют обмен данными между различными программами. Эти соглашения задают единообразный способ передачи сообщений и обработки ошибок при взаимодействии программного обеспечения разнесённой в пространстве аппаратуры, соединённой тем или иным интерфейсом.

![TCP/IP/OSI](https://github.com/eldaroid/pictures/blob/master/iOSWiki/ComputerScience/NewTCP:IP:OSI.jpg?raw=true)

OSI - это концептуальная модель, которая практически не используется для связи. А модель TCP/IP используется для установления соединения и связи через сеть.

## Модель TCP/IP

Модель TCP/IP состоит из четырех уровней, каждый из которых имеет свой собственный набор протоколов:

* Прикладной уровень: включает протоколы, которые позволяют приложениям взаимодействовать с сетью.
    * HTTP (для просмотра веб-страниц);
    * SMTP (используется для электронной почты);
    * <details><summary>FTP (используется для передачи файлов)</summary>
        <p>

        File Transfer Protocol — это протокол передачи файлов со специального файлового сервера на компьютер пользователя. FTP дает возможность абоненту обмениваться двоичными и текстовыми файлами с любым компьютером сети. Установив связь с удаленным компьютером, пользователь может скопировать файл с удаленного компьютера на свой или скопировать файл со своего компьютера на удаленный.

        </p>
        </details>

* Транспортный уровень: Этот уровень отвечает за обеспечение надежной доставки данных в правильном порядке. Основным протоколом, используемым на этом уровне, является TCP.

    * <details><summary>TCP</summary>
        <p>

        Transmission Control Protocol (управления передачей) основный протокол, предназначенный для управления передачей данных Интернета в сетях и подсетях TCP/[IP](./2.3.2.3%20IP.md).
        
        Данные делятся на мелкие фрагменты (пакеты). Каждый пакет содержит заголовок (информацию об адресах источника, назначение) и порядковые номера (для получения пакетов в правильном порядке).

        Перед **передачей пакетов** устанавливается соединение с помощью **трехстороннего рукопожатия**: SYN (synchronize), SYN-ACK (synchronize acknowledgment), ACK (acknowledgment).

        Когда **устр-во получает пакет**, отправляется **подтверждение** отправителю, что пакет получен. Если пакет не подтверждается в течение определенного времени, отправитель повторно посылает пакет, чтобы обеспечить его надежную доставку.

        </p>
        </details>


    * <details><summary>UDP</summary>
        <p>

        С UDP (User Datagram Protocol) компы посылают сбщ (датаграммы) другим хостам по интернет IP-сети.

        Н/р: DNS и потоковые мультимедийные приложения вроде IPTV, Voice over IP, протоколы туннелирования IP и онлайн-игры.

        **Без установления соединения**: Не требует предварительного сбщ перед для установки специальных каналов передачи данных.

        **Ненадежная доставка**: UDP не гарантирует доставку пакетов, их порядок или проверку ошибок. Пакеты могут теряться, дублироваться или приходить в неправильном порядке.

        </p>
        </details>
    ![](https://github.com/eldaroid/pictures/blob/master/iOSWiki/ComputerScience/TCPvsUDP.png?raw=true)

* Интернет-уровень(Межсетевой): Этот уровень отвечает за маршрутизацию данных между сетями. Основной протокол, используемый на этом уровне:

    * <details><summary><a href="./2.3.2.3%20IP.md">IP (Internet Protocol)</a></summary>
        <p>

        [Internet Protocol](./2.3.2.3%20IP.md), межсетевой протокол - маршрутизируемый протокол сетевого уровня стека TCP/IP. Именно IP стал тем протоколом, который объединил отдельные компьютерные сети во всемирную сеть Интернет. Неотъемлемой частью протокола является адресация сети.

        ![](https://github.com/eldaroid/pictures/blob/master/iOSWiki/ComputerScience/IP.jpeg?raw=true)

        </p>
        </details>

* Канальный уровень: отвечает за передачу данных между устройствами в одной сети. Примерами протоколов, используемых на этом уровне, являются Ethernet и Wi-Fi.

❗В целом, модель TCP/IP обеспечивает стандартизированный способ взаимодействия различных устройств друг с другом через Интернет, что позволяет обеспечить бесперебойную и надежную связь между сетями и устройствами.

### HTTP (HyperText Transfer Protocol, изначально протокол передачи гипертекста) - [80й порт](./2.3.2.4%20Ports.md)

<details><summary>Раскрыть</summary>
<p>

Этот протокол описывает взаимодействие между двумя компьютерами (клиентом и сервером), построенное на базе сообщений, называемых запрос (Request) и ответ (Response). Каждое сообщение состоит из трех частей: стартовая строка, заголовки и тело. При этом обязательной является только стартовая строка.

Клиент отправляет запрос на HTTP-сервер, где располагается сайт, после чего сервер посылает ответ. Этот ответ содержит информацию о состоянии завершения. Выглядит это примерно так: HTTP/1.1 [200 OK](../2.3.1%20API/2.3.1.5%20ResponseStatusCode.md). 

> При отправлении и получении пакетов данных по сети интернет через HTTP используется протокол управления передачей (TCP). Соединение при этом происходит через порт 80. 

HTTP также применяет UDP (протокол пользовательских дейтаграмм). 

За прошедшие годы протокол TCP был некоторым образом усовершенствован, но по большей части остается таким же, каким был в 1974 году. 

Это менее надёжный протокол, однако его активно применяются в видеоконференциях, играх и потоковой передаче. Благодаря этому можно отбрасывать и принимать отдельные пакеты в произвольном порядке для увеличения производительности.

Самым авторитетным источником использования протокола HTTP является IETF (Internet Engineering Task Force) и спецификация HTTP 1.1, описанная в [RFC 2616](http://tools.ietf.org/html/rfc2616).

</p>
</details>

### HTTPS ([443й порт](./2.3.2.4%20Ports.md))

<details><summary>Раскрыть</summary>
<p>

HTTPS безопасный протокол передачи гипертекста (или HTTP через TLS/SSL).

Сайты, работающие по протоколу HTTPS даже при вводе обычного `http://` переадресовывают на защищенное соединение. HTTPS  использует [TCP](./2.3.2.2%20Protocols.md) для отправки и получения пакетов данных, но через [порт 443](./2.3.2.2%20Protocols.md) соединением, зашифрованным TSL. 

HTTPS шифрует данные открытым ключом, а затем получатель расшифровывает его. Открытый ключ лежит на сервере и входит в SSL-сертификат. Сертификаты, в свою очередь, криптографически подписываются центром сертификации (ЦС).

Каждый браузер имеет список доверенных ЦС. Любой подписанный центром сертификации сертификат, входящий в список доверенных, получает в адресной строке значок в виде зеленого замка.

#### По сути, протокол TLS выполняет следующие функции:

* Шифрование - передача информации происходит в зашифрованном виде, что делает невозможной кражу информации и отслеживание действий пользователя на других ресурсах.

* Аутентификация - пользователю гарантируется, что он переходит на официальный сайт, а не на его дубликат.

* Сохранение данных - в случае попытки злоумышленника взломать систему, информация об этом сохраняется.

</p>
</details>

### В чем разница между HTTP и HTTPS?

* По-разному записывается URL-адрес. Для HTTP — http://, а для HTTPS — https://.

* HTTP является не защищенным, а HTTPS защищенным.

* Для HTTP не нужны SSL-сертификаты; для HTTPS нужен SSL-сертификат, подписанный центром сертификации.

* В HTTP нет шифрования, HTTPS шифрует данные перед отправкой.

* HTTP посылает данные через [порт 80](./2.3.2.4%20Ports.md), а HTTPS использует [порт 443](./2.3.2.4%20Ports.md) (зашифрованный TSL).

* HTTP работает на **уровне приложений**, а HTTPS — на **транспортном уровне**.

* HTTP не требует проверки домена, тогда как HTTPS требует хотя бы проверки домена, а для некоторых сертификатов даже проверки юридического документа.

---

[2.3.2.1 WWW Theme](./2.3.2.1%20WWW.md) | [Back To iOSWiki Contents](https://github.com/eldaroid/iOSWiki) | [2.3.2.3 IP Theme](./2.3.2.3%20IP.md)
